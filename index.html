<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Girasoles Interactivos</title>

<!-- (Opcional) Activa una Google Font cambiando la URL y la var(--font-family) -->
<!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"> -->

<style>
  :root{
    /* ========= Personalizaci√≥n r√°pida ========= */
    --font-family: system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif; /* C√°mbiala si usas Google Fonts */
    --bg-start: #fff8e1;   /* marfil suave */
    --bg-end:   #eceff1;   /* gris claro */
    --accent:   #ffc107;   /* amarillo girasol */
    --text:     #263238;   /* gris carb√≥n */
    --spot:     #111;      /* color del hotspot */
    --overlay:  rgba(0,0,0,.45); /* overlay m√≥vil */
    --popover-maxw: 32rem; /* ancho m√°x. de textos largos */
    --ring: rgba(255, 193, 7, .35); /* halo del foco */
  }

  html,body{height:100%;}
  body{
    margin:0;
    font-family:var(--font-family);
    color:var(--text);
    background: linear-gradient(180deg, var(--bg-start), var(--bg-end));
    overflow-x:hidden;
  }

  /* Parallax de fondo: capa adicional */
  .bg-parallax{
    position:fixed; inset:0;
    background:
      radial-gradient(1200px 1200px at 10% 0%, rgba(255,193,7,.12), transparent 60%),
      radial-gradient(900px 900px at 90% 20%, rgba(255,193,7,.08), transparent 60%),
      radial-gradient(700px 700px at 50% 100%, rgba(0,0,0,.06), transparent 60%);
    will-change: transform;
    pointer-events:none;
    z-index:-1;
  }

  .hero{
    min-height:100svh;
    display:grid;
    place-items:center;
    position:relative;
    padding: clamp(16px, 4vw, 48px);
    isolation:isolate;
  }

  .stage{
    position:relative;
    width:min(92vw, 920px);
    aspect-ratio: 1 / 1; /* cuadrado responsive */
    display:grid;
    place-items:center;
  }

  .centerpiece{
    position:relative;
    width:min(60vw, 520px);
    max-width:95%;
    filter: drop-shadow(0 10px 30px rgba(0,0,0,.18));
    transform: translateZ(0);
    animation: float 8s ease-in-out infinite;
  }

  /* Ken Burns (zoom muy sutil) */
  .centerpiece img{
    width:100%;
    height:auto;
    display:block;
    transform-origin:50% 50%;
    animation: kenburns 18s ease-in-out infinite;
  }

  @keyframes float{
    0%,100%{ transform: translateY(0px) }
    50%{ transform: translateY(-8px) }
  }
  @keyframes kenburns{
    0%,100%{ transform: scale(1) rotate(0.0001deg) }
    50%{ transform: scale(1.025) rotate(0.0001deg) }
  }

  /* Hotspots */
  .hotspot{
    position:absolute;
    width:34px; height:34px;
    border-radius:999px;
    background:#fff;
    display:grid; place-items:center;
    box-shadow:
      0 0 0 2px #fff,
      0 0 0 4px var(--ring),
      0 10px 20px rgba(0,0,0,.12);
    cursor:pointer;
    border:none;
    font-size:18px;
    line-height:1;
    color:var(--spot);
    transition: transform .2s ease;
  }
  .hotspot:hover{ transform: scale(1.06); }
  .hotspot:focus-visible{ outline:2px solid var(--accent); outline-offset:3px; }

  /* L√≠neas gu√≠a */
  .hotspot::after{
    content:"";
    position:absolute;
    width:2px; height:40px;
    background: linear-gradient(var(--accent), transparent);
    transform-origin: top center;
    top: 33px; /* debajo del bot√≥n */
    left: calc(50% - 1px);
    opacity:.8;
    pointer-events:none;
  }

  /* Popover reutilizable */
  .popover{
    position:absolute;
    inset:auto auto 0 0; /* ser√° reposicionado por JS */
    max-width:var(--popover-maxw);
    background:#fff;
    color:var(--text);
    border:1px solid rgba(0,0,0,.08);
    border-radius:14px;
    box-shadow: 0 20px 40px rgba(0,0,0,.18);
    padding:14px 16px;
    font-size:clamp(14px, 1.9vw, 16px);
    line-height:1.5;
    transform: translate(-50%, -16px);
    display:none;
    z-index:5;
  }
  .popover[data-open="true"]{ display:block; }

  .popover .title{
    font-weight:700;
    margin:0 0 6px 0;
  }
  .popover .content{
    overflow:auto;
    max-height: min(38vh, 420px);
  }
  .popover .close{
    position:absolute; top:6px; right:8px;
    border:none; background:transparent; cursor:pointer;
    font-size:20px; line-height:1; color:#777;
  }
  .popover .close:focus-visible{ outline:2px solid var(--accent); border-radius:6px; }

  /* Posiciones (porcentaje respecto al stage) */
  .hs-1{ left:16%; top:22%;  --rot:20deg;  }
  .hs-2{ right:14%; top:18%; --rot:-18deg; }
  .hs-3{ left:10%; bottom:20%; --rot:12deg; }
  .hs-4{ right:10%; bottom:22%; --rot:-8deg; }
  .hs-5{ left:48%; top:6%;  --rot:8deg;  }
  .hs-6{ left:50%; bottom:8%; --rot:0deg; }

  .hotspot::after{ transform: rotate(var(--rot)); }

  /* Responsive: acercar hotspots en pantallas peque√±as */
  @media (max-width:700px){
    .hs-1{ left:22%; top:28%; }
    .hs-2{ right:20%; top:26%; }
    .hs-3{ left:18%; bottom:24%; }
    .hs-4{ right:16%; bottom:26%; }
    .hs-5{ left:50%; top:10%; }
    .hs-6{ left:50%; bottom:10%; }
  }

  /* Panel inferior en m√≥vil cuando el texto es largo */
  .mobile-panel{
    position:fixed; left:0; right:0; bottom:0;
    background:#fff;
    border-top-left-radius:16px;
    border-top-right-radius:16px;
    box-shadow: 0 -10px 30px rgba(0,0,0,.18);
    max-height: 60vh;
    transform: translateY(110%);
    transition: transform .3s ease;
    z-index:10;
  }
  .mobile-panel[data-open="true"]{ transform: translateY(0%); }
  .mobile-panel .grab{ width:48px; height:5px; background:#ccc; border-radius:6px; margin:8px auto; }
  .mobile-panel .inner{ padding:8px 16px 18px; overflow:auto; max-height:calc(60vh - 24px); }
  .scrim{
    position:fixed; inset:0; background:var(--overlay);
    opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:9;
  }
  .scrim[data-open="true"]{ opacity:1; pointer-events:auto; }

  /* Respeto a usuarios con menos movimiento */
  @media (prefers-reduced-motion: reduce){
    .centerpiece, .centerpiece img { animation: none !important; }
    .bg-parallax { transform:none !important; }
    .hotspot { transition:none; }
  }

  /* Encabezado simple (opcional) */
  header{
    position:fixed; left:0; right:0; top:0; z-index:2;
    display:flex; justify-content:center; padding:10px 16px;
    pointer-events:none;
  }
  .badge{
    pointer-events:auto;
    background:#fff;
    border:1px solid rgba(0,0,0,.08);
    border-radius:999px;
    padding:8px 12px;
    font-weight:600;
    box-shadow: 0 6px 16px rgba(0,0,0,.1);
  }
</style>
</head>
<body>
  <div class="bg-parallax" aria-hidden="true"></div>

  <header>
    <div class="badge">Girasoles interactivos</div>
  </header>

  <main class="hero" id="hero">
    <section class="stage" aria-label="Escena interactiva de girasoles">
      <!-- Imagen central -->
      <figure class="centerpiece" aria-label="Arreglo de girasoles">
        <!-- Reemplaza 'girasoles.jpg' por tu archivo -->
        <img src="girasoles.jpg" alt="Arreglo de girasoles en maceta negra" loading="eager">
      </figure>

      <!-- Hotspots con iconos (puedes cambiar texto y/o icono) -->
      <button class="hotspot hs-1" aria-expanded="false" aria-controls="popover" data-title="P√©talos üåº"
        data-text="Color vibrante que atrae polinizadores. Puedes escribir textos largos aqu√≠; el popover se adapta y agrega scroll cuando es necesario.">üåº</button>

      <button class="hotspot hs-2" aria-expanded="false" aria-controls="popover" data-title="Disco floral üåª"
        data-text="Centro con potencial de semillas y una rica estructura de florecillas agrupadas.">üåª</button>

      <button class="hotspot hs-3" aria-expanded="false" aria-controls="popover" data-title="Hojas üåø"
        data-text="Superficie amplia para fotos√≠ntesis; ayudan a regular el intercambio gaseoso y la transpiraci√≥n.">üåø</button>

      <button class="hotspot hs-4" aria-expanded="false" aria-controls="popover" data-title="Tallo üå±"
        data-text="Sost√©n principal del arreglo; facilita el transporte de agua y nutrientes.">üå±</button>

      <button class="hotspot hs-5" aria-expanded="false" aria-controls="popover" data-title="Botones ‚ú≥Ô∏è"
        data-text="Fases tempranas de floraci√≥n: las flores en desarrollo anticipan nuevas cabezuelas.">‚ú≥Ô∏è</button>

      <button class="hotspot hs-6" aria-expanded="false" aria-controls="popover" data-title="Maceta ‚ö´"
        data-text="Base discreta y estable para el arreglo; su color negro enfatiza el contraste con los p√©talos.">‚ö´</button>

      <!-- Popover reutilizable en desktop/tablet -->
      <aside class="popover" id="popover" role="dialog" aria-modal="false" aria-live="polite">
        <button class="close" aria-label="Cerrar">√ó</button>
        <h3 class="title"></h3>
        <div class="content"></div>
      </aside>
    </section>
  </main>

  <!-- Panel m√≥vil tipo bottom-sheet -->
  <div class="scrim" id="scrim" hidden></div>
  <section class="mobile-panel" id="mobilePanel" aria-hidden="true" aria-label="Detalle del elemento">
    <div class="grab" aria-hidden="true"></div>
    <div class="inner">
      <h3 class="title"></h3>
      <div class="content"></div>
    </div>
  </section>

<script>
  // ===== Parallax de fondo y leve parallax del stage =====
  const bg = document.querySelector('.bg-parallax');
  const stage = document.querySelector('.stage');

  function onScroll(){
    const y = window.scrollY || 0;
    // Parallax sutil del fondo
    bg.style.transform = `translateY(${y * 0.06}px)`;
    // Parallax muy leve de la escena (opcional)
    stage.style.transform = `translateY(${y * 0.02}px)`;
  }
  window.addEventListener('scroll', onScroll, {passive:true});

  // ===== Popover (desktop/tablet) + Panel m√≥vil =====
  const popover = document.getElementById('popover');
  const popTitle = popover.querySelector('.title');
  const popContent = popover.querySelector('.content');
  const btnClose = popover.querySelector('.close');

  const mobilePanel = document.getElementById('mobilePanel');
  const mobileTitle = mobilePanel.querySelector('.title');
  const mobileContent = mobilePanel.querySelector('.content');
  const scrim = document.getElementById('scrim');

  function isMobile(){
    return window.matchMedia('(max-width: 700px)').matches;
  }

  function openPopoverFor(btn){
    const title = btn.dataset.title || 'Detalle';
    const text  = btn.dataset.text  || '';
    if(isMobile()){
      // Panel inferior
      mobileTitle.textContent = title;
      mobileContent.textContent = text;
      mobilePanel.setAttribute('data-open','true');
      mobilePanel.setAttribute('aria-hidden','false');
      scrim.hidden = false;
      scrim.setAttribute('data-open','true');
    }else{
      // Popover junto al hotspot
      popTitle.textContent = title;
      popContent.textContent = text;
      popover.setAttribute('data-open','true');

      // Posicionar cerca del bot√≥n
      const rect = btn.getBoundingClientRect();
      const host = document.querySelector('.stage').getBoundingClientRect();
      const x = rect.left + rect.width/2 - host.left;
      const y = rect.top  - host.top; // arriba del bot√≥n
      popover.style.left = `${x}px`;
      popover.style.top  = `${y}px`;
    }
    // Marcar aria-expanded
    document.querySelectorAll('.hotspot[aria-expanded="true"]').forEach(h=>h.setAttribute('aria-expanded','false'));
    btn.setAttribute('aria-expanded','true');
  }

  function closeOverlays(){
    popover.removeAttribute('data-open');
    mobilePanel.setAttribute('data-open','false');
    mobilePanel.setAttribute('aria-hidden','true');
    scrim.removeAttribute('data-open');
    setTimeout(()=>{ scrim.hidden = true; }, 250);
    document.querySelectorAll('.hotspot[aria-expanded="true"]').forEach(h=>h.setAttribute('aria-expanded','false'));
  }

  // Delegaci√≥n de eventos para hotspots
  document.addEventListener('click', (e)=>{
    const hs = e.target.closest('.hotspot');
    if(hs){ openPopoverFor(hs); }
  });

  // Cerrar
  btnClose.addEventListener('click', closeOverlays);
  scrim.addEventListener('click', closeOverlays);
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeOverlays(); });

  // Accesibilidad: activar con Enter/Espacio
  document.querySelectorAll('.hotspot').forEach(btn=>{
    btn.setAttribute('role','button');
    btn.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        openPopoverFor(btn);
      }
    });
    // Ajustar rotaci√≥n de l√≠nea al voltear lado
    const isRight = btn.classList.contains('hs-2') || btn.classList.contains('hs-4');
    if(isRight) btn.style.transformOrigin = 'right center';
  });

  // Reposicionar popover al redimensionar
  window.addEventListener('resize', ()=>{
    const opened = document.querySelector('.hotspot[aria-expanded="true"]');
    if(opened && !isMobile()) openPopoverFor(opened);
  });
</script>
</body>
</html>
